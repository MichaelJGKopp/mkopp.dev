logging:
  level:
    ROOT: INFO
    '[org.hibernate.SQL]': INFO
    '[dev.mkopp.mysite]': INFO
    # Control ControllerLoggingAspect level. Set to DEBUG to see args, or OFF to disable.
    '[dev.mkopp.mysite.shared.logging.ControllerLoggingAspect]': ${CONTROLLER_LOGGING_ASPECT_LEVEL:INFO}
    # Control ServiceLoggingAspect level. Set to DEBUG to see args, or OFF to disable.
    '[dev.mkopp.mysite.shared.logging.ServiceLoggingAspect]': ${SERVICE_LOGGING_ASPECT_LEVEL:INFO}
server:
  port: 8200
  shutdown: graceful
spring:
  config:
    import:
      - 'classpath:application-db.yaml'
      - 'classpath:application-security.yaml'
      - 'classpath:application-ai.yaml'
  lifecycle:
    timeout-per-shutdown-phase: 25s
  # profiles:
  #     active: dev
  jackson:
    time-zone: UTC
  application:
    name: mysite backend
  # threads:  # update java and enable if needed
  #     virtual:
  #         enabled: true
  devtools:
    restart:
      enabled: false
    livereload:
      enabled: false
  # cache:
  #     type: caffeine
  #     caffeine:
  #         spec: maximumSize=500,expireAfterWrite=10m
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB
  output:
    ansi:
      enabled: ALWAYS
management:
  endpoints:
    web:
      exposure:
        include: 'health,info' # ,prometheus later
      base-path: /management
  endpoint:
    health:
      show-details: always
      probes:
        enabled: true
      group:
        liveness:
          include: 'livenessState' # Is the app itself running?
        readiness:
          include: 'livenessState,readinessState,db' # Is it running AND ready for traffic?
springdoc:
  swagger-ui:
    path: /swagger-ui.html
    oauth:
      client-id: mkopp
      use-pkce-with-authorization-code-grant: true
      scopes:
        - openid
        - profile
        - email
    tags-sorter: alpha
    operations-sorter: alpha
  api-docs:
    path: /v3/api-docs
application:
  api:
    error:
      path: 'https://mkopp.dev/api/v1/errors/'
  # events:
  #     # Für Event Tabelle zum Wiederholen von fehlgeschlagenen Events und Aufräumen
  #     outboundRetryIntervalMs: 60000
  #     clearIntervalMs: 86400000   # 1 days
  #     clearOlderThanDays: 30
  # client-base-url: ${CLIENT_BASE_URL:http://localhost:4200}  # For email templates, webhooks, etc. (not currently used)
  cors:
    allowed-origins: ${ALLOWED_ORIGINS:https://www.mkopp.dev,http://localhost,http://localhost:4200}
    allowed-methods:
      - 'GET'
      - 'POST'
      - 'PUT'
      - 'PATCH'
      - 'DELETE'
      - 'OPTIONS'
    allowed-headers:
      - 'Authorization'
      - 'Content-Type'
      - 'Content-Disposition'
      - 'Accept'
    exposed-headers:
      - 'Location'
    allow-credentials: true
    max-age: 3600
  # stripe:
  #     api-key: ${STRIPE_API_KEY}
  #     webhook-secret: ${STRIPE_WEBHOOK_SECRET}
  logging:
    # Custom properties for our logging aspects
    controller:
      log-request-args: ${CONTROLLER_LOGGING_REQUEST_ARGS:false}
    service:
      log-request-args: ${SERVICE_LOGGING_REQUEST_ARGS:false}
